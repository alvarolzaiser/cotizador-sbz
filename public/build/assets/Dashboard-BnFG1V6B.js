import{e as n,o as r,a as s,d as m,p as z,D as I,c as U,w as b,b as M,t as d,u as g,P as Z,k as w,s as $,x as N,f as v,E as q,F as P,h as S,n as h,g as B,z as k}from"./app-DeQX2WPH.js";import{u as R,_ as H}from"./AppLayout-BkeXll_N.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as L}from"./lodash-C7uqkgLR.js";const Q={},Y={width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function G(j,u){return r(),n("svg",Y,u[0]||(u[0]=[s("path",{opacity:"0.5",d:"M2 12C2 13.6394 2.42496 14.1915 3.27489 15.2957C4.97196 17.5004 7.81811 20 12 20C16.1819 20 19.028 17.5004 20.7251 15.2957C21.575 14.1915 22 13.6394 22 12C22 10.3606 21.575 9.80853 20.7251 8.70433C19.028 6.49956 16.1819 4 12 4C7.81811 4 4.97196 6.49956 3.27489 8.70433C2.42496 9.80853 2 10.3606 2 12Z",fill:"#1C274C"},null,-1),s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.25 12C8.25 9.92893 9.92893 8.25 12 8.25C14.0711 8.25 15.75 9.92893 15.75 12C15.75 14.0711 14.0711 15.75 12 15.75C9.92893 15.75 8.25 14.0711 8.25 12ZM9.75 12C9.75 10.7574 10.7574 9.75 12 9.75C13.2426 9.75 14.25 10.7574 14.25 12C14.25 13.2426 13.2426 14.25 12 14.25C10.7574 14.25 9.75 13.2426 9.75 12Z",fill:"#1C274C"},null,-1)]))}const J=K(Q,[["render",G]]),W={class:"sticky top-0 bg-white z-50 shadow-sm border-b border-gray-200"},X={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ee={class:"py-4"},se={class:"flex items-center justify-between mb-3"},te={class:"text-lg lg:text-xl"},oe={class:"flex flex-row"},ae={class:"bg-[#6875F5] text-white flex items-center justify-center w-4 h-4 rounded-full text-xs -ml-3"},le={class:"flex flex-row gap-2 rounded-lg"},re={class:"py-12"},ne={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ie={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},de={class:"p-6 lg:p-8 bg-white border-b border-gray-200"},ce={class:"mb-4"},ue={class:"flex flex-row gap-4 mb-2 items-center justify-between lg:justify-normal"},me={key:1,class:"text-emerald-500"},ve={key:0,class:"text-yellow-600"},pe={class:"flex flex-col md:flex-row md:items-center justify-between gap-3"},xe={class:"flex flex-row gap-4"},he={key:0,class:"bg-white rounded-md border border-gray-300 p-2"},_e=["src"],ge={class:"font-bold flex items-start gap-2"},fe=["href"],ye={class:"flex flex-row items-start gap-2 my-2"},be={key:0,class:"flex flex-row gap-2"},we={class:"my-2"},ke={class:"flex items-center"},Ce=["onUpdate:modelValue","max","disabled"],Ae=["onClick","disabled"],ze={key:1},Be={__name:"Dashboard",setup(j){const u=R(),c=m(z().props.productos),l=m({}),a=m(),_=m(),p=m(!1),x=m("");c.value.forEach(o=>{l.value[o.id]=1}),a.value="precio_normal",I(l,o=>{Object.keys(o).forEach(t=>{(isNaN(o[t])||o[t]<0)&&(l.value[t]=0)})});function E(o){const t=l.value[o.id]||0,e=a.value;t>0&&(u.addItem(o,t,e),l.value[o.id]=0)}async function T(){p.value=!0;try{const o=await k.post(route("productos.actualizarProductos"));_.value=o.data.message;const t=await k.get(route("productos.productosActualizados"));c.value=t.data.productos_actualizados,u.items.forEach(i=>{const D=i.id,V=i.precio,A=i.priceType,y=c.value.find(F=>F.id===D);y&&V!==y[A]&&(i.precio=y[A])}),u.syncStorage()}catch(o){_.value="¡¡¡Ocurrió un error al intentar actualizar los productos!!!",console.error(o)}finally{p.value=!1}}async function f(){try{if(x.value){const o=await k.get(route("productos.search"),{params:{search:x.value}});c.value=o.data.results}else c.value=z().props.productos}catch(o){console.log(o)}}const C=L.debounce(async()=>{await f()},200),O=o=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(o);return(o,t)=>(r(),U(H,{title:"Productos"},{header:b(()=>t[4]||(t[4]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Productos ",-1)])),default:b(()=>[s("div",W,[s("div",X,[s("div",ee,[s("div",se,[s("h2",te,"Buscá tus productos ("+d(c.value.length)+" "+d(x.value?"encontrado/s":"en total")+")",1),M(g(Z),{href:o.route("carrito")},{default:b(()=>[s("div",oe,[t[5]||(t[5]=s("svg",{width:"30",height:"30",viewBox:"-1 -1 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M8 21.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM19 21.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM2 4.5H1m3 0 1.5 12H18L21 8.5H6",stroke:"#6875F5","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),s("div",ae,d(g(u).items.length),1)])]),_:1},8,["href"])]),s("div",le,[w(s("input",{onKeyup:[t[0]||(t[0]=(...e)=>g(C)&&g(C)(...e)),$(f,["enter"])],type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>x.value=e),class:"w-full rounded-md",placeholder:"Busca tu producto..."},null,544),[[N,x.value]]),s("button",{class:"w-fit px-6 bg-blue-500 rounded-md text-white hidden lg:block",onClick:f},"Buscar")])])])]),s("div",re,[s("div",ne,[s("div",ie,[s("div",de,[s("div",ce,[s("div",ue,[w(s("select",{class:"border py-1 rounded-md","onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e)},t[6]||(t[6]=[s("option",{value:"precio_normal"},"Precio normal",-1),s("option",{value:"precio_mayorista"},"Precio mayorista",-1)]),512),[[q,a.value]]),p.value?v("",!0):(r(),n("button",{key:0,onClick:t[3]||(t[3]=e=>T()),class:"bg-emerald-500 text-white py-1 px-3 rounded-md"}," Actualizar datos ")),p.value?(r(),n("p",me," Actualizando datos, espere por favor... ")):v("",!0)]),_.value&&!p.value?(r(),n("p",ve,d(_.value),1)):v("",!0)]),c.value.length>0?(r(!0),n(P,{key:0},S(c.value,e=>(r(),n("div",{key:e.id,class:h([{"bg-red-200":e[a.value]<=0},"mb-4 p-4 bg-gray-100 rounded shadow"])},[s("div",pe,[s("div",xe,[e.image_url?(r(),n("div",he,[s("img",{src:e.image_url,class:"w-[100px] h-[100%] max-h-[100px] object-contain rounded-md"},null,8,_e)])):v("",!0),s("div",null,[s("p",ge,[B(d(e.titulo)+" ",1),e.link_producto?(r(),n("a",{key:0,href:e.link_producto,target:"_blank",class:"text-blue-600 rounded-md"},[s("button",null,[M(J,{class:"w-6 h-6"})])],8,fe)):v("",!0)]),s("div",ye,[Array.isArray(e.atributos)?v("",!0):(r(),n("div",be,[(r(!0),n(P,null,S(e.atributos,i=>(r(),n("p",{key:i.slug,class:"bg-slate-600 text-white px-1 rounded-sm"},d(i.value),1))),128))])),s("span",{class:h({"bg-green-700 text-white px-1 rounded-sm":e.stock>0,"bg-red-700 text-white px-1 rounded-sm":e.stock<=0})},d(e.stock),3),s("p",null,"SKU: "+d(e.codigo),1)]),s("div",null,[s("p",we,[B("Precio: "+d(O(e[a.value]))+" ",1),s("span",{class:h(a.value=="precio_normal"?"bg-blue-200 px-1 rounded-sm lg:ml-1":a.value=="precio_mayorista"?"bg-green-200 px-1 rounded-sm lg:ml-1":"bg-yellow-200 px-1 rounded-sm lg:ml-1")},d(a.value=="precio_normal"?"NORMAL":a.value=="precio_mayorista"?"MAYORISTA":"DESCONOCIDO"),3)])])])]),s("div",ke,[w(s("input",{type:"number","onUpdate:modelValue":i=>l.value[e.id]=i,min:"0",max:e.stock,class:h(["w-16 border p-2 mr-2 text-center rounded-md",{"opacity-50 cursor-not-allowed":l.value[e.id]<=0||e.stock<=0||e[a.value]<=0}]),disabled:l.value[e.id]<=0||e.stock<=0||e[a.value]<=0},null,10,Ce),[[N,l.value[e.id],void 0,{number:!0}]]),s("button",{onClick:i=>E(e),disabled:l.value[e.id]<=0||e.stock<=0||l.value[e.id]>e.stock||e[a.value]<=0,class:h(["bg-blue-500 text-white px-4 py-2 rounded",{"opacity-50 cursor-not-allowed":l.value[e.id]<=0||e.stock<=0||l.value[e.id]>e.stock||e[a.value]<=0}])}," Agregar ",10,Ae)])])],2))),128)):(r(),n("div",ze,t[7]||(t[7]=[s("h2",{class:"text-red-500"},"No se encontraron productos que coincidan con tu busqueda",-1)])))])])])])]),_:1}))}};export{Be as default};
